var KChart={};KChart.Util={extend:function(a){var b,c,d,e;for(b=1,d=arguments.length;d>b;b++){e=arguments[b];for(c in e)a[c]=e[c]}return a},create:Object.create||function(a){function b(){}return b.prototype=a,new b}},KChart.Object=function(){},KChart.Object.extend=function(a){var e,b=function(){this.initialize&&this.initialize.apply(this,arguments)},c=b.__root__=b.__base__=this.prototype,d=KChart.Util.create(c);d.constructor=b,b.prototype=d;for(e in this)this.hasOwnProperty(e)&&"prototype"!=e&&"__base__"!=e&&(b[e]=this[e]);return a.statics&&(KChart.Util.extend(b,a.statics),delete a.statics),d.options&&(d.options=KChart.Util.extend(KChart.Util.create(d.options),a.options),delete a.options),KChart.Util.extend(d,a),b},KChart.myEvent={addListener:function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else if("function"==typeof a["on"+b]){var d=a["on"+b];a["on"+b]=function(){d(),c()}}else a["on"+b]=c},getEvent:function(a){return a?a:window.event},getTarget:function(a){return a.target||a.srcElement},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},removeListener:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getRelatedTarget:function(a){return a.relatedTarget?a.relatedTarget:a.toElement&&"mouseout"==a.type?a.toElement:a.fromElement&&"mouseover"==a.type?a.fromElement:null},getButton:function(a){if(document.implementation.hasFeature("MouseEvents","2.0"))return a.button;switch(a.button){case 0:case 1:case 3:case 5:case 7:return 0;case 2:case 6:return 2;case 4:return 1}},getCharCode:function(a){return"number"==typeof a.charCode?a.charCode:a.keyCode}},KChart.Vertex=KChart.Object.extend({initialize:function(a,b){this.x=a,this.y=b}}),KChart.Shape=KChart.Object.extend({initialize:function(a){Array.isArray(a)||console.log("the type of argument should be [Array]"),this.vertexes=a},getPerimeter:function(){console.log("not implemented.")},getArea:function(){console.log("not implemented.")},resize:function(a,b){var c,d;for(a>this.vertexes.length-1&&console.log("Index out of arrange"),c=this.vertexes[a],d=0;d<this.vertexes.length;d++)this.vertexes[d].x=c.x-(c.x-this.vertexes[d].x)*b,this.vertexes[d].y=c.y-(c.y-this.vertexes[d].y)*b},move:function(a,b){for(var c=0;c<this.vertexes.length;c++)this.vertexes[c].x+=a,this.vertexes[c].y+=b}}),KChart.Style=KChart.Object.extend({initialize:function(a){KChart.Util.extend(this,this.options),KChart.Util.extend(this,a)},options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd"}}),KChart.Canvas=KChart.Object.extend({initialize:function(a,b,c){this.width=a,this.height=b,this.bgColor=c||"black"}}),KChart.Painter=KChart.Object.extend({initialize:function(a,b){this.style=new KChart.Style,this.setCanvas(a),this.setStyle(b)},draw:function(a){switch(this.setCxtStyle(),a.constructor){case KChart.Point:this.drawPoint(a.vertexes[0]);break;case KChart.PolyLine:this.drawPolyline(a);break;case KChart.Polygon:this.drawPolygon(a);break;case KChart.Circle:this.drawCircle(a);break;case KChart.Arc:this.drawArc(a);break;case KChart.Fan:this.drawFan(a);break;default:return"wrong shape"}},drawPoint:function(a){var b=new KChart.Circle(a,1);this.drawCircle(b)},drawPolyline:function(a){this.cxt.beginPath(),this.cxt.moveTo(a.vertexes[0].x,a.vertexes[0].y);for(var b=1;b<a.vertexes.length;b++)this.cxt.lineTo(a.vertexes[b].x,a.vertexes[b].y);this.cxt.stroke(),this.cxt.closePath()},drawPolygon:function(a){this.cxt.beginPath(),this.cxt.moveTo(a.vertexes[0].x,a.vertexes[0].y);for(var b=1;b<a.vertexes.length;b++)this.cxt.lineTo(a.vertexes[b].x,a.vertexes[b].y);this.cxt.lineTo(a.vertexes[0].x,a.vertexes[0].y),this.cxt.closePath(),this.cxt.stroke(),this.cxt.fill(this.style.options.fillRule)},drawCircle:function(a){this.cxt.beginPath(),this.cxt.arc(a.vertexes[0].x,a.vertexes[0].y,a.radius,0,2*Math.PI),this.cxt.closePath(),this.cxt.stroke(),this.cxt.fill(this.style.options.fillRule)},drawText:function(a,b,c){this.cxt.fillStyle="black",this.cxt.textAlign="center",this.cxt.fillText(a,b,c)},drawArc:function(a){this.cxt.beginPath(),this.cxt.arc(a.vertexes[0].x,a.vertexes[0].y,a.radius,a.sAngle,a.eAngle,a.counterclockwise),this.cxt.stroke()},drawFan:function(a){this.cxt.beginPath(),this.cxt.arc(a.vertexes[0].x,a.vertexes[0].y,a.radius,a.sAngle,a.eAngle,a.counterclockwise),this.cxt.lineTo(a.vertexes[0].x,a.vertexes[0].y),this.cxt.lineTo(a.vertexes[0].x+a.radius*Math.cos(a.sAngle),a.vertexes[0].y+a.radius*Math.sin(a.sAngle)),this.cxt.closePath(),this.cxt.stroke(),this.cxt.fill(this.style.options.fillRule)},setCanvas:function(a){var b;a.constructor===KChart.Canvas?(b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.style.background=a.bgColor,b.style.margin="20px",document.body.appendChild(b)):a.constructor===HTMLCanvasElement&&(b=a),this.canvas=b,this.cxt=b.getContext("2d"),this.setCxtStyle()},setStyle:function(a){this.style=a||new KChart.Style,this.setCxtStyle()},setCxtStyle:function(){var a=this.style,b=this.cxt;b.strokeStyle=a.stroke?a.color:"rgba(0,0,0,0)",b.fillStyle=a.fill?a.fillColor:"rgba(0,0,0,0)",b.lineWidth=a.weight,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,Array.isArray(a.dashArray)?b.setLineDash(a.dashArray):b.setLineDash(new Array)}}),KChart.Animation=KChart.Object.extend({initialize:function(a,b,c){this.start=a,this.end=b,this.tween=c||KChart.helper.Tween.Linear},drawAnimation:function(){}}),KChart.Axis=KChart.Object.extend({initialize:function(a,b,c,d,e){this.basePoint=a,this.width=b,this.height=c,this.unitWidth=d,this.unitHeight=e},drawXAxis:function(a,b){var c,d,e,f,g,h;for(a.setStyle(new KChart.Style({color:"black",dashArray:null})),c=this.basePoint.x,d=this.basePoint.y,e=new KChart.PolyLine([this.basePoint,new KChart.Vertex(c+this.width,d)]),a.draw(e),f=0;f<b.length;f++)for(g=b[f].length,h=0;g>h;h++)a.drawText(b[f][h],(f+.5)*this.unitWidth+c,d+20+15*h)},drawYAxis:function(a,b){var c,e,f,g,h,i,j,k;for(a.setStyle(new KChart.Style({color:"black",dashArray:null})),c=this.basePoint.x,e-this.height,e=this.basePoint.y,f=new KChart.PolyLine([this.basePoint,new KChart.Vertex(c,e-this.height)]),a.draw(f),g=this.unitHeight,h=this.unitWidth,i=KChart.Vertex,a.setStyle(new KChart.Style({color:"black",weight:1,fill:!0,fillColor:"black",dashArray:[6,12]})),j=0;j<b.length;j++)k=new KChart.PolyLine([new i(c,e-b[j]*g),new i((j+.5)*h+c,e-b[j]*g)]),a.draw(k),a.cxt.textAlign="right",a.cxt.fillText(b[j],c-5,e-b[j]*g)}}),KChart.Handler=KChart.Object.extend({initialize:function(a){this.chart=a;var b=document.getElementById("floatDiv");b||(b=document.createElement("div"),b.id="floatDiv",b.style.position="absolute",b.style.background="rgba(255,255,255,0.5)",b.zIndex=888,document.body.appendChild(b)),this.div=b},handle:function(){}}),KChart.helper={getMax:function(a){var c,b=a[0];for(c=1;c<a.length;c++)b<a[c]&&(b=a[c]);return b},getMin:function(a){var c,b=a[0];for(c=1;c<a.length;c++)b>a[c]&&(b=a[c]);return b},getPointOnCanvas:function(a,b){var c=a.getBoundingClientRect();return{x:b.x-c.left*(a.width/c.width),y:b.y-c.top*(a.height/c.height)}},addEvent:function(a,b){switch(b){case"mousemove":var c=new KChart.HoverHandler(a);KChart.myEvent.addListener(a.painter.canvas,b,function(a){c.handle.call(c,a)})}},inRange:function(a,b){switch(b[0].constructor){case KChart.Polygon:return this.inPolygonRange(a,b);case KChart.Circle:return this.inCircleRange(a,b);case KChart.Fan:return this.inFanRange(a,b);default:throw new Error("not implemented.")}},inPolygonRange:function(a,b){var e,f,g,h,i,c=a.x,d=a.y;for(e=0;e<b.length;e++)if(f=b[e].vertexes[1].x,g=b[e].vertexes[1].y,h=b[e].vertexes[3].x,i=b[e].vertexes[3].y,c>=f&&h>=c&&d>=g&&i>=d)return e;return-1},inCircleRange:function(a,b){var e,f,g,h,c=a.x,d=a.y;for(e=0;e<b.length;e++)if(f=b[e].vertexes[0].x,g=b[e].vertexes[0].y,h=b[e].radius,Math.pow(c-f,2)+Math.pow(d-g,2)<=Math.pow(h,2))return e;return-1},inFanRange:function(a,b){var e,f,g,h,i,j,k,c=a.x,d=a.y;for(e=0;e<b.length;e++)if(f=b[e].vertexes[0].x,g=b[e].vertexes[0].y,h=b[e].radius,Math.pow(c-f,2)+Math.pow(d-g,2)<=Math.pow(h,2)&&(i=c-f,j=d-g,k=Math.atan(j/i),i>=0&&j>=0?k=k:k+=i>=0&0>j?2*Math.PI:Math.PI,k>=b[e].sAngle&&k<=b[e].eAngle))return e;return-1},requestAnimFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},cancelAnimFrame:window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)},Tween:{Linear:function(a,b,c,d){return c*a/d+b},Quad:{easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},Quint:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}},Sine:{easeIn:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOut:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOut:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b}},Expo:{easeIn:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}},Circ:{easeIn:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOut:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}},Elastic:{easeIn:function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:("undefined"==typeof f&&(f=.3*d),!e||e<Math.abs(c)?(g=f/4,e=c):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f))+b)},easeOut:function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:("undefined"==typeof f&&(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+c+b)},easeInOut:function(a,b,c,d,e,f){var g;return 0==a?b:2==(a/=d/2)?b+c:("undefined"==typeof f&&(f=d*.3*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b:.5*e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+c+b)}},Back:{easeIn:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOut:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOut:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b}},Bounce:{easeIn:function(a,b,c,d){return c-Tween.Bounce.easeOut(d-a,0,c,d)+b},easeOut:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOut:function(a,b,c,d){return d/2>a?.5*Tween.Bounce.easeIn(2*a,0,c,d)+b:.5*Tween.Bounce.easeOut(2*a-d,0,c,d)+.5*c+b}}}},KChart.Chart=KChart.Object.extend({initialize:function(a,b,c,d){this.width=a,this.height=b,this.data=c,this.title=d},draw:function(a,b){a?(this.horizontalOffset=(a.width-this.width)/2,this.verticalOffset=(a.height-this.height)/2):(this.horizontalOffset=.15*this.width,this.verticalOffset=.15*this.height,a=new KChart.Canvas(this.width+2*this.horizontalOffset,this.height+2*this.verticalOffset,"#eeeeee")),b=b||new KChart.Style({fill:!0,fillColor:"#50aaff"});var c=this.painter=new KChart.Painter(a,b);this.title&&c.drawText(this.title,this.width/2+this.horizontalOffset,10)}}),KChart.BarAnimation=KChart.Animation.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},drawAnimation:function(a){function s(){var a,b;o++,a=n.tween(o,q,r,p),b=new KChart.Polygon([new l((m+.25)*j+d,f),new l((m+.25)*j+d,f-a),new l((m+.75)*j+d,f-a),new l((m+.75)*j+d,f)]),g.draw(b),p>o?KChart.helper.requestAnimFrame.call(window,s):(m++,m==i?KChart.helper.cancelAnimFrame.call(window,s):(o=n.start,p=n.end,q=0,r=h[m]*k,KChart.helper.requestAnimFrame.call(window,s)))}var b=a.height,d=(a.width,a.horizontalOffset),e=a.verticalOffset,f=b+e,g=a.painter,h=a.values,i=h.length,j=a.unitWidth,k=a.unitHeight,l=KChart.Vertex,m=0,n=this,o=n.start,p=n.end,q=0,r=h[m]*k;KChart.helper.requestAnimFrame.call(window,s)}}),KChart.FanAnimation=KChart.Animation.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},drawAnimation:function(a){function n(){var a,o;g++,a=f.tween(g,i,j,h),o=new KChart.Fan(k,l,i,a),d.draw(o),h>g?KChart.helper.requestAnimFrame.call(window,n):(e++,6==e?KChart.helper.cancelAnimFrame.call(window,n):(g=f.start,h=f.end,i=c[e].sAngle,j=c[e].eAngle-c[e].sAngle,k=c[e].vertexes[0],l=c[e].radius,m=new KChart.Style({weight:0,fill:!0,fillColor:b[e]}),d.setStyle(m),KChart.helper.requestAnimFrame.call(window,n)))}var b=a.colors,c=a.eles,d=a.painter,e=0,f=this,g=f.start,h=f.end,i=c[e].sAngle,j=c[e].eAngle-c[e].sAngle,k=c[e].vertexes[0],l=c[e].radius,m=new KChart.Style({weight:0,fill:!0,fillColor:b[e]});d.setStyle(m),KChart.helper.requestAnimFrame.call(window,n)}}),KChart.LineAnimation=KChart.Animation.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},drawAnimation:function(a){function n(){var a,b;h++,a=g.tween(h,j,k,i),b=new KChart.PolyLine([c[f],new KChart.Vertex(a,l*a+m)]),e.draw(b),i>h?KChart.helper.requestAnimFrame.call(window,n):(f++,f==d-1?KChart.helper.cancelAnimFrame.call(window,n):(h=g.start,i=g.end,j=c[f].x,k=c[f+1].x-c[f].x,l=(c[f].y-c[f+1].y)/(c[f].x-c[f+1].x),m=c[f].y-l*c[f].x,KChart.helper.requestAnimFrame.call(window,n)))}var c=(KChart.Vertex,a.vertexes),d=c.length,e=a.painter,f=0,g=this,h=g.start,i=g.end,j=c[f].x,k=c[f+1].x-c[f].x,l=(c[f].y-c[f+1].y)/(c[f].x-c[f+1].x),m=c[f].y-l*c[f].x;KChart.helper.requestAnimFrame.call(window,n)}}),KChart.HoverHandler=KChart.Handler.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},handle:function(a){var d,e,b=this.chart,c=this.div;a=KChart.myEvent.getEvent(a),d=KChart.helper.getPointOnCanvas(b.painter.canvas,{x:a.clientX,y:a.clientY}),e=KChart.helper.inRange(d,b.eles),-1!=e?(c.width=100,c.height=100,c.style.left=a.pageX+10+"px",c.style.top=a.pageY+10+"px",c.innerHTML=b.keys[e]+" : "+b.values[e]):(c.width=0,c.height=0,c.innerHTML="")}}),KChart.Arc=KChart.Shape.extend({initialize:function(a,b,c,d,e){this.vertexes=[a],this.center=a,this.radius=b,this.sAngle=c,this.eAngle=d,this.counterclockwise=e},getPerimeter:function(){return 2*Math.PI*this.radius},getArea:function(){return Math.PI*Math.pow(this.radius,2)},resize:function(a){this.radius*=a}}),KChart.Circle=KChart.Shape.extend({initialize:function(a,b){this.vertexes=[a],this.center=a,this.radius=b},getPerimeter:function(){return 2*Math.PI*this.radius},getArea:function(){return Math.PI*Math.pow(this.radius,2)},resize:function(a){this.radius*=a}}),KChart.Fan=KChart.Shape.extend({initialize:function(a,b,c,d,e){this.center=a,this.vertexes=[a],this.radius=b,this.sAngle=c,this.eAngle=d,this.counterclockwise=e},getPerimeter:function(){return 2*(Math.PI*this.radius+this.radius)},getArea:function(){return Math.PI*Math.pow(this.radius,2)},resize:function(a){this.radius*=a}}),KChart.Point=KChart.Shape.extend({getPerimeter:function(){return 0},getArea:function(){return 0},resize:function(){console.log("not implemented.")}}),KChart.Polygon=KChart.Shape.extend({getPerimeter:function(){var b,a=0;for(b=0;b<this.vertexes.length-1;b++)a+=Math.sqrt(Math.pow(this.vertexes[b+1].x-this.vertexes[b].x,2)+Math.pow(this.vertexes[b+1].y-this.vertexes[b].y,2));return a+=Math.sqrt(Math.pow(this.vertexes[0].x-this.vertexes[this.vertexes.length-1].x,2)+Math.pow(this.vertexes[0].y-this.vertexes[this.vertexes.length-1].y,2))},getArea:function(){var d,e,g,a=0,f=this.vertexes.length,b=this.vertexes[0].x,c=this.vertexes[0].y;for(g=1;f-1>g;g++)d=this.vertexes[g],e=this.vertexes[g+1],a+=(d.x-b)*(e.y-c)-(d.y-c)*(e.x-b);return Math.abs(a)/2}}),KChart.PolyLine=KChart.Shape.extend({getPerimeter:function(){var b,a=0;for(b=0;b<this.vertexes.length-1;b++)a+=Math.sqrt(Math.pow(this.vertexes[b+1].x-this.vertexes[b].x,2)+Math.pow(this.vertexes[b+1].y-this.vertexes[b].y,2));return a},getArea:function(){return 0}}),KChart.BarChart=KChart.Chart.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},draw:function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(this.constructor.__base__.draw.apply(this,arguments),c=KChart.helper,d=this.height,e=this.width,f=this.horizontalOffset,g=this.verticalOffset,h=this.data,i=d+g,j=this.painter,k=j.style,l=this.keys=Object.keys(h),m=l.length,n=this.values=[],o=0;m>o;o++)n.push(h[l[o]]);for(p=c.getMax(n),q=this.unitWidth=e/m,r=this.unitHeight=.95*d/p,s=KChart.Vertex,t=this.eles=[],o=0;m>o;o++)u=new KChart.Polygon([new s((o+.25)*q+f,i),new s((o+.25)*q+f,i-n[o]*r),new s((o+.75)*q+f,i-n[o]*r),new s((o+.75)*q+f,i)]),t.push(u);v=new KChart.Axis(new s(f,i),e,d,q,r),v.drawXAxis(j,l),v.drawYAxis(j,n),j.setStyle(k),w=new KChart.BarAnimation(0,15),w.drawAnimation(this),c.addEvent(this,"mousemove")}}),KChart.FanChart=KChart.Chart.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},draw:function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,q,r,t,u,s,w,x,y,z,A,B;for(this.constructor.__base__.draw.apply(this,arguments),c=KChart.helper,d=this.painter,e=d.style,f=this.width/2+this.horizontalOffset,g=this.height/2+this.verticalOffset,h=g>f?.8*f:.8*g,i=this.data,j=this.keys=Object.keys(i),k=j.length,l=this.values=[],m=0,n=0;k>n;n++)l.push(i[j[n]]),m+=i[j[n]];for(o=c.getMax(l),KChart.Vertex,q=this.eles=[],r=this.colors=[],s=0,n=0;k>n;n++)u=h*(l[n]/o),t=2*(l[n]/m)*Math.PI+s,w=new KChart.Fan(new KChart.Vertex(f,g),u,s,t),q.push(w),s=t,x=Math.round(255*Math.random()),y=Math.round(255*Math.random()),z=Math.round(255*Math.random()),A="rgb("+x+","+y+","+z+")",r.push(A);d.setStyle(e),B=new KChart.FanAnimation(0,15),B.drawAnimation(this),c.addEvent(this,"mousemove")}}),KChart.LineChart=KChart.Chart.extend({initialize:function(){this.constructor.__base__.initialize.apply(this,arguments)},draw:function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(this.constructor.__base__.draw.apply(this,arguments),c=KChart.helper,d=this.height,e=this.width,f=this.horizontalOffset,g=this.verticalOffset,h=this.data,i=d+g,j=this.painter,k=j.style,l=this.keys=Object.keys(h),m=l.length,n=this.values=[],o=0;m>o;o++)n.push(h[l[o]]);for(p=c.getMax(n),q=this.unitWidth=e/m,r=this.unitHeight=.95*d/p,s=KChart.Vertex,t=this.vertexes=[],o=0;m>o;o++)t.push(new s((o+.5)*q+f,i-n[o]*r));for(u=new KChart.Axis(new s(f,i),e,d,q,r),u.drawXAxis(j,l),u.drawYAxis(j,n),j.setStyle(new KChart.Style({color:"red",fill:!0,fillColor:"#eeeeee",dashArray:null})),this.eles=[],o=0;m>o;o++)v=new KChart.Circle(t[o],3),j.draw(v),this.eles.push(v);j.setStyle(k),w=new KChart.LineAnimation(0,15),w.drawAnimation(this),c.addEvent(this,"mousemove")}});